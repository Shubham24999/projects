<!DOCTYPE html>
<html>
  <head>
    <title>Masai Employee Records</title>
  </head>
  <body>
    <!-- Use this form for taking the inputs  -->
    <form id="form">
      <input placeholder="Name" type="text" id="name" />
      <input placeholder="Employee ID" type="text" id="employee_id" />
      <select id="department">
        <option value="">Select Department</option>
        <option value="HR">HR</option>
        <option value="Finance">Finance</option>
        <option value="Engineering">Engineering</option>
      </select>
      <input placeholder="Experience" type="number" id="experience" />
      <input placeholder="Email" type="email" id="email" />
      <input placeholder="Mobile No." type="number" id="mobile" />
      <input type="submit" value="Submit" />
    </form>

    <!-- Use this select tag for filtering  -->
    <select id="filter">
      <option value="">Select Department</option>
      <option value="HR">HR</option>
      <option value="Finance">Finance</option>
      <option value="Engineering">Engineering</option>
    </select>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Employee ID</th>
          <th>Department</th>
          <th>Experience in Years</th>
          <th>Email</th>
          <th>Mobile No</th>
          <th>Role</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody id="user_row_data">
        <!-- Append Rows here using JS & DOM  -->
      </tbody>
    </table>
  </body>
  <script>
    let tbody=document.getElementById("user_row_data");
    let form=document.getElementById("form");
    let filter=document.getElementById("filter");
    let filterdata=[];
    let data=[];

    filter.addEventListener("change",()=>{
      let filtervalue=filter.value;
      let filtered_data=filterdata.filter((element,index)=>{
        if(filtervalue==element.department){
           return true;
        }
        else{
          return false;
        }
      })
      createDom(filtered_data)
    })

    form.addEventListener("submit",(e)=>{
      e.preventDefault();
      let name=document.getElementById("name").value;
      let employeeid=document.getElementById("employee_id").value;
      let department=document.getElementById("department").value;
      let experience=document.getElementById("experience").value;
      let email=document.getElementById("email").value;
      let mobno=document.getElementById("mobile").value;
      let Record={name,employeeid,department,experience,email,mobno};
      data.push(Record);
      createDom(data);
    });
    function createDom(data){
      tbody.innerHTML=null;
      data.forEach((element,index)=>{
        let tr = document.createElement("tr");
        let td1 = document.createElement("td");
        let td2 = document.createElement("td");
        let td3 = document.createElement("td");
        let td4 = document.createElement("td");
        let td5 = document.createElement("td");
        let td6 = document.createElement("td");
        let td7 = document.createElement("td");
        let td8 = document.createElement("td");
        td1.innerText=element.name;
        td2.innerText=element.employeeid;
        td3.innerText=element.department;
        td4.innerText=element.experience;
        td5.innerText=element.email;
        td6.innerText=element.mobno;
        if(element.experience>5){
          td7.innerText="Senior";
        }
        else if(element.experience>=2 && element.experience<=5){
          td7.innerText="Junior";
        }
        else{
          td7.innerText="Fresher";
        }
        td8.innerText="Delete";
        td8.addEventListener("click",()=>{
          data.splice(index,1);
          // tr.append(td1,td2,td3,td4,td5,td6,td7,td8);
          // tbody.append(tr);
          createDom(data);
          
        });
        tr.append(td1,td2,td3,td4,td5,td6,td7,td8);
        console.log(tr);
        tbody.append(tr);
      });
    }
  </script>
</html>
